

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2. Spring Boot基础配置 &mdash; 运维开发修炼之路</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'1.0.0',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="1. Spring Boot入门" href="01.Spring_Boot入门.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> 小健_Java_Blog
          

          
            
            <img src="../_static/my_java_study.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Java/index.html">Java学习笔记</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Distributed_Systems/index.html">分布式系统架构案例(Java)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Spring Boot</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="01.Spring_Boot入门.html">1. Spring Boot入门</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">2. Spring Boot基础配置</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#spring-boot-starter-parent">2.1. 不使用spring-boot-starter-parent</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spring-bootapplication">2.2. &#64;Spring BootApplication</a></li>
<li class="toctree-l3"><a class="reference internal" href="#banner">2.3. 定制banner</a></li>
<li class="toctree-l3"><a class="reference internal" href="#web">2.4. Web容器配置</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">2.4.1. 1.常规配置</a></li>
<li class="toctree-l4"><a class="reference internal" href="#https">2.4.2. 2.HTTPS配置</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#jetty">2.5. Jetty配置</a></li>
<li class="toctree-l3"><a class="reference internal" href="#undertow">2.6. Undertow配置</a></li>
<li class="toctree-l3"><a class="reference internal" href="#properties">2.7. Properties配置</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">小健_Java_Blog</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Spring Boot</a> &raquo;</li>
        
      <li>2. Spring Boot基础配置</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/Spring_Boot/02.Spring_Boot基础配置.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#spring-boot" id="id2">Spring Boot基础配置</a><ul>
<li><a class="reference internal" href="#spring-boot-starter-parent" id="id3">不使用spring-boot-starter-parent</a></li>
<li><a class="reference internal" href="#spring-bootapplication" id="id4">&#64;Spring BootApplication</a></li>
<li><a class="reference internal" href="#banner" id="id5">定制banner</a></li>
<li><a class="reference internal" href="#web" id="id6">Web容器配置</a><ul>
<li><a class="reference internal" href="#id1" id="id7">1.常规配置</a></li>
<li><a class="reference internal" href="#https" id="id8">2.HTTPS配置</a></li>
</ul>
</li>
<li><a class="reference internal" href="#jetty" id="id9">Jetty配置</a></li>
<li><a class="reference internal" href="#undertow" id="id10">Undertow配置</a></li>
<li><a class="reference internal" href="#properties" id="id11">Properties配置</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="spring-boot">
<h1><a class="toc-backref" href="#id2">2. Spring Boot基础配置</a><a class="headerlink" href="#spring-boot" title="Permalink to this headline">¶</a></h1>
<div class="section" id="spring-boot-starter-parent">
<h2><a class="toc-backref" href="#id3">2.1. 不使用spring-boot-starter-parent</a><a class="headerlink" href="#spring-boot-starter-parent" title="Permalink to this headline">¶</a></h2>
<p>spring-boot-starter-parent主要提供了如下默认配置：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>* java版本默认为1.8。
* 编码格式默认使用UTF-8。
* 提供Dependency Management进行项目依赖的版本管理。
* 默认的资源过滤与插件配置。
</pre></div>
</div>
<p>一般在项目开发或者多模块项目时，需要使用公司自己的parent。这个时候需要进行项目依赖版本的统一管理，就需要使用dependencyManagement来实现，如下：</p>
<div class="code xml highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;groupId&gt;org.sang&lt;/groupId&gt;
    &lt;artifactId&gt;chapter01-2&lt;/artifactId&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
    &lt;packaging&gt;jar&lt;/packaging&gt;

    &lt;name&gt;chapter012&lt;/name&gt;
    &lt;description&gt;使用IntelliJ IDEA创建Spring Boot项目&lt;/description&gt;

    &lt;properties&gt;
        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;
        &lt;java.version&gt;1.8&lt;/java.version&gt;
    &lt;/properties&gt;

    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
    &lt;dependencyManagement&gt;
        &lt;dependencies&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;
                &lt;version&gt;2.0.3.RELEASE&lt;/version&gt;
                &lt;type&gt;pom&lt;/type&gt;
                &lt;scope&gt;import&lt;/scope&gt;
            &lt;/dependency&gt;
        &lt;/dependencies&gt;
    &lt;/dependencyManagement&gt;
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
                &lt;version&gt;3.1&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;source&gt;1.8&lt;/source&gt;
                    &lt;target&gt;1.8&lt;/target&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;


&lt;/project&gt;
</pre></div>
</div>
</div>
<div class="section" id="spring-bootapplication">
<h2><a class="toc-backref" href="#id4">2.2. &#64;Spring BootApplication</a><a class="headerlink" href="#spring-bootapplication" title="Permalink to this headline">¶</a></h2>
<p>&#64;Spring
BootApplication注解是加在项目启动类上的，是一个组合注解，定义如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>@SpringBootConfiguration
@EnableAutoConfiguration
@ComponentScan(
    excludeFilters = {@Filter(
    type = FilterType.CUSTOM,
    classes = {TypeExcludeFilter.class}
), @Filter(
    type = FilterType.CUSTOM,
    classes = {AutoConfigurationExcludeFilter.class}
)}
)
public @interface SpringBootApplication {
    @AliasFor(
        annotation = EnableAutoConfiguration.class
    )
    Class&lt;?&gt;[] exclude() default {};
    ......
</pre></div>
</div>
<p>①&#64;SpringBootConfiguration 的定义如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@Configuration</span>
<span class="n">public</span> <span class="nd">@interface</span> <span class="n">SpringBootConfiguration</span> <span class="p">{</span>
<span class="p">}</span>
</pre></div>
</div>
<p>原来就是一个&#64;Configuration，所以&#64;SpringBootConfiguration
的功能就是表明是一个配置类，开发者可以在这个类中配置Bean。</p>
<p>虽然项目启动类也包含&#64;Configuration，开发者可以创建一个新的类专门用来配置Bean，这样便于配置的管理。这个类只需要加上&#64;Configuraion注解即可。代码如下：</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="p">;</span>

<span class="nd">@Configuration</span>
<span class="n">public</span> <span class="k">class</span> <span class="nc">MyConfig</span> <span class="p">{</span>
<span class="p">}</span>
</pre></div>
</div>
<p>TomcatConfig.java</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/**</span>
 <span class="o">*</span> <span class="n">Created</span> <span class="n">by</span> <span class="n">sang</span> <span class="n">on</span> <span class="mi">2018</span><span class="o">/</span><span class="mi">7</span><span class="o">/</span><span class="mf">4.</span>
 <span class="o">*/</span>
<span class="nd">@Configuration</span>
<span class="n">public</span> <span class="k">class</span> <span class="nc">TomcatConfig</span> <span class="p">{</span>
    <span class="nd">@Bean</span>
    <span class="n">TomcatServletWebServerFactory</span> <span class="n">tomcatServletWebServerFactory</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">TomcatServletWebServerFactory</span> <span class="n">factory</span> <span class="o">=</span> <span class="n">new</span> <span class="n">TomcatServletWebServerFactory</span><span class="p">(){</span>
            <span class="nd">@Override</span>
            <span class="n">protected</span> <span class="n">void</span> <span class="n">postProcessContext</span><span class="p">(</span><span class="n">Context</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">SecurityConstraint</span> <span class="n">constraint</span> <span class="o">=</span> <span class="n">new</span> <span class="n">SecurityConstraint</span><span class="p">();</span>
                <span class="n">constraint</span><span class="o">.</span><span class="n">setUserConstraint</span><span class="p">(</span><span class="s2">&quot;CONFIDENTIAL&quot;</span><span class="p">);</span>
                <span class="n">SecurityCollection</span> <span class="n">collection</span> <span class="o">=</span> <span class="n">new</span> <span class="n">SecurityCollection</span><span class="p">();</span>
                <span class="n">collection</span><span class="o">.</span><span class="n">addPattern</span><span class="p">(</span><span class="s2">&quot;/*&quot;</span><span class="p">);</span>
                <span class="n">constraint</span><span class="o">.</span><span class="n">addCollection</span><span class="p">(</span><span class="n">collection</span><span class="p">);</span>
                <span class="n">context</span><span class="o">.</span><span class="n">addConstraint</span><span class="p">(</span><span class="n">constraint</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">};</span>
        <span class="n">factory</span><span class="o">.</span><span class="n">addAdditionalTomcatConnectors</span><span class="p">(</span><span class="n">createTomcatConnector</span><span class="p">());</span>
        <span class="k">return</span> <span class="n">factory</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">private</span> <span class="n">Connector</span> <span class="n">createTomcatConnector</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">Connector</span> <span class="n">connector</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Connector</span><span class="p">(</span><span class="s2">&quot;org.apache.coyote.http11.Http11NioProtocol&quot;</span><span class="p">);</span>
        <span class="n">connector</span><span class="o">.</span><span class="n">setScheme</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">);</span>
        <span class="n">connector</span><span class="o">.</span><span class="n">setPort</span><span class="p">(</span><span class="mi">8080</span><span class="p">);</span>
        <span class="n">connector</span><span class="o">.</span><span class="n">setSecure</span><span class="p">(</span><span class="n">false</span><span class="p">);</span>
        <span class="n">connector</span><span class="o">.</span><span class="n">setRedirectPort</span><span class="p">(</span><span class="mi">8081</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">connector</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>②&#64;EnableAutoConfiguration表明开启自动化配置。</p>
<p>③&#64;ComponentScan完成包扫描，也是Spring中的功能，由于&#64;ComponentScan注解默认扫描的类都位于当前类所在包的下面，因此建议实际项目开发中把项目启动类放在根包中。</p>
</div>
<div class="section" id="banner">
<h2><a class="toc-backref" href="#id5">2.3. 定制banner</a><a class="headerlink" href="#banner" title="Permalink to this headline">¶</a></h2>
<p>定制banner只需要在resources目录下创建一个banner.txt文件。这个文件中写入txt的艺术字。</p>
<p>关闭banner，可以修改项目启动类的main方法，代码如下：</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@SpringBootApplication</span>
<span class="n">public</span> <span class="k">class</span> <span class="nc">App</span> <span class="p">{</span>
    <span class="n">public</span> <span class="n">static</span> <span class="n">void</span> <span class="n">main</span><span class="p">(</span><span class="n">String</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
<span class="o">//</span>        <span class="n">SpringApplication</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">App</span><span class="o">.</span><span class="n">class</span><span class="p">,</span> <span class="n">args</span><span class="p">);</span>          <span class="o">//</span><span class="n">通过run方法启动项目</span>

        <span class="o">//</span> <span class="n">关闭banner</span>
        <span class="n">SpringApplicationBuilder</span> <span class="n">builder</span> <span class="o">=</span> <span class="n">new</span> <span class="n">SpringApplicationBuilder</span><span class="p">(</span><span class="n">App</span><span class="o">.</span><span class="n">class</span><span class="p">);</span>
        <span class="n">builder</span><span class="o">.</span><span class="n">bannerMode</span><span class="p">(</span><span class="n">Banner</span><span class="o">.</span><span class="n">Mode</span><span class="o">.</span><span class="n">OFF</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">args</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="web">
<h2><a class="toc-backref" href="#id6">2.4. Web容器配置</a><a class="headerlink" href="#web" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3><a class="toc-backref" href="#id7">2.4.1. 1.常规配置</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>当开发者添加了spring-boot-starter-web依赖之后，默认使用Tomcat作为Web容器,如果要对Tomcat做进一步配置，可以在application.properties中进行配置。代码如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">server</span><span class="o">.</span><span class="n">port</span><span class="o">=</span><span class="mi">8081</span>
<span class="n">server</span><span class="o">.</span><span class="n">error</span><span class="o">.</span><span class="n">path</span><span class="o">=/</span><span class="n">error</span>
<span class="n">server</span><span class="o">.</span><span class="n">servlet</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">timeout</span><span class="o">=</span><span class="mi">1</span>
<span class="n">server</span><span class="o">.</span><span class="n">servlet</span><span class="o">.</span><span class="n">context</span><span class="o">-</span><span class="n">path</span><span class="o">=/</span><span class="n">chapter02</span>
<span class="n">server</span><span class="o">.</span><span class="n">tomcat</span><span class="o">.</span><span class="n">uri</span><span class="o">-</span><span class="n">encoding</span><span class="o">=</span><span class="n">utf</span><span class="o">-</span><span class="mi">8</span>
<span class="n">server</span><span class="o">.</span><span class="n">tomcat</span><span class="o">.</span><span class="n">max</span><span class="o">-</span><span class="n">threads</span><span class="o">=</span><span class="mi">500</span>
<span class="n">server</span><span class="o">.</span><span class="n">tomcat</span><span class="o">.</span><span class="n">basedir</span><span class="o">=/</span><span class="n">home</span><span class="o">/</span><span class="n">sang</span><span class="o">/</span><span class="n">tmp</span>
</pre></div>
</div>
</div>
<div class="section" id="https">
<h3><a class="toc-backref" href="#id8">2.4.2. 2.HTTPS配置</a><a class="headerlink" href="#https" title="Permalink to this headline">¶</a></h3>
<p>国内一些云服务器厂商提供没法的HTTPS证书，一个账号可以申请多个，在jdk中提供了一个java数字证书管理工具，keytool。</p>
<p>在/jdk/bin目录下，通过如下工具可以生成一个数字证书。命令如下</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">keytool</span> <span class="o">-</span><span class="n">genkey</span> <span class="o">-</span><span class="n">alias</span> <span class="n">tomcathttps</span> <span class="o">-</span><span class="n">keyalg</span> <span class="n">RSA</span> <span class="o">-</span><span class="n">keysize</span> <span class="mi">2048</span> <span class="o">-</span><span class="n">keystore</span> <span class="n">sang</span><span class="p">,</span><span class="n">p12</span> <span class="o">-</span><span class="n">validity</span> <span class="mi">365</span>
</pre></div>
</div>
<p>在application.properties中进行配置如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">server</span><span class="o">.</span><span class="n">ssl</span><span class="o">.</span><span class="n">key</span><span class="o">-</span><span class="n">store</span><span class="o">=</span><span class="n">sang</span><span class="o">.</span><span class="n">p12</span>
<span class="n">server</span><span class="o">.</span><span class="n">ssl</span><span class="o">.</span><span class="n">key</span><span class="o">-</span><span class="n">alias</span><span class="o">=</span><span class="n">tomcathttps</span>
<span class="n">server</span><span class="o">.</span><span class="n">ssl</span><span class="o">.</span><span class="n">key</span><span class="o">-</span><span class="n">store</span><span class="o">-</span><span class="n">password</span><span class="o">=</span><span class="mi">123456</span>
<span class="c1">#server.ssl.key-store-type=PKCS12</span>
</pre></div>
</div>
<p>配置成功，启动项目，在浏览器输入”<a class="reference external" href="https://localhost:8081/chapter02/hello">https://localhost:8081/chapter02/hello</a>”来查看结果。</p>
<p>使用http访问时候，访问失败，这是因为spring
Boot不支持同时在配置中启动HTTP和HTTPS，这个时候可以配置请求重定向，将HTTP请求重定向为HTTPS，配置方式如下：</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">package</span> <span class="n">org</span><span class="o">.</span><span class="n">sang</span><span class="o">.</span><span class="n">config</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.apache.catalina.Context</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.apache.catalina.connector.Connector</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.apache.tomcat.util.descriptor.web.SecurityCollection</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.apache.tomcat.util.descriptor.web.SecurityConstraint</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Bean</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="p">;</span>

<span class="o">/**</span>
 <span class="o">*</span> <span class="n">Created</span> <span class="n">by</span> <span class="n">sang</span> <span class="n">on</span> <span class="mi">2018</span><span class="o">/</span><span class="mi">7</span><span class="o">/</span><span class="mf">4.</span>
 <span class="o">*/</span>
<span class="nd">@Configuration</span>
<span class="n">public</span> <span class="k">class</span> <span class="nc">TomcatConfig</span> <span class="p">{</span>
    <span class="nd">@Bean</span>
    <span class="n">TomcatServletWebServerFactory</span> <span class="n">tomcatServletWebServerFactory</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">TomcatServletWebServerFactory</span> <span class="n">factory</span> <span class="o">=</span> <span class="n">new</span> <span class="n">TomcatServletWebServerFactory</span><span class="p">(){</span>
            <span class="nd">@Override</span>
            <span class="n">protected</span> <span class="n">void</span> <span class="n">postProcessContext</span><span class="p">(</span><span class="n">Context</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">SecurityConstraint</span> <span class="n">constraint</span> <span class="o">=</span> <span class="n">new</span> <span class="n">SecurityConstraint</span><span class="p">();</span>
                <span class="n">constraint</span><span class="o">.</span><span class="n">setUserConstraint</span><span class="p">(</span><span class="s2">&quot;CONFIDENTIAL&quot;</span><span class="p">);</span>
                <span class="n">SecurityCollection</span> <span class="n">collection</span> <span class="o">=</span> <span class="n">new</span> <span class="n">SecurityCollection</span><span class="p">();</span>
                <span class="n">collection</span><span class="o">.</span><span class="n">addPattern</span><span class="p">(</span><span class="s2">&quot;/*&quot;</span><span class="p">);</span>
                <span class="n">constraint</span><span class="o">.</span><span class="n">addCollection</span><span class="p">(</span><span class="n">collection</span><span class="p">);</span>
                <span class="n">context</span><span class="o">.</span><span class="n">addConstraint</span><span class="p">(</span><span class="n">constraint</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">};</span>
        <span class="n">factory</span><span class="o">.</span><span class="n">addAdditionalTomcatConnectors</span><span class="p">(</span><span class="n">createTomcatConnector</span><span class="p">());</span>
        <span class="k">return</span> <span class="n">factory</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">private</span> <span class="n">Connector</span> <span class="n">createTomcatConnector</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">Connector</span> <span class="n">connector</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Connector</span><span class="p">(</span><span class="s2">&quot;org.apache.coyote.http11.Http11NioProtocol&quot;</span><span class="p">);</span>
        <span class="n">connector</span><span class="o">.</span><span class="n">setScheme</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">);</span>
        <span class="n">connector</span><span class="o">.</span><span class="n">setPort</span><span class="p">(</span><span class="mi">8080</span><span class="p">);</span>
        <span class="n">connector</span><span class="o">.</span><span class="n">setSecure</span><span class="p">(</span><span class="n">false</span><span class="p">);</span>
        <span class="n">connector</span><span class="o">.</span><span class="n">setRedirectPort</span><span class="p">(</span><span class="mi">8081</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">connector</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>这里首先配置一个TomcatServletWebServerFactory，然后添加一个Tomcat中的Connector（监听8080），并将前期转发到8081上去。</p>
<p>浏览器访问”<a class="reference external" href="http://127.0.0.1:8080/chapter02/hello">http://127.0.0.1:8080/chapter02/hello</a>”会自动跳转到”<a class="reference external" href="https://127.0.0.1:8081/chapter02/hello">https://127.0.0.1:8081/chapter02/hello</a>”界面。</p>
</div>
</div>
<div class="section" id="jetty">
<h2><a class="toc-backref" href="#id9">2.5. Jetty配置</a><a class="headerlink" href="#jetty" title="Permalink to this headline">¶</a></h2>
<p>除了Tomcat外，也可以在Spring Boot中嵌入Jetty，配置方式如下：</p>
<p>目录结构</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>│  chapter013.iml
│  pom.xml
├─src
│  ├─main
│  │  ├─java
│  │  │  └─org
│  │  │      └─sang
│  │  │              Application.java
│  │  │
│  │  └─resources
│  └─test
│      └─java
└─target
    │  chapter01-3-0.0.1-SNAPSHOT.jar
    │  chapter01-3-0.0.1-SNAPSHOT.jar.original
    │
    ├─classes
    │  └─org
    │      └─sang
    │              Application.class
</pre></div>
</div>
<p>pom.xml如下：</p>
<div class="code xml highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;groupId&gt;org.sang&lt;/groupId&gt;
    &lt;artifactId&gt;chapter01-3&lt;/artifactId&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
    &lt;packaging&gt;jar&lt;/packaging&gt;

    &lt;name&gt;chapter01-3&lt;/name&gt;
    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;

    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;2.0.3.RELEASE&lt;/version&gt;
        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
    &lt;/parent&gt;

    &lt;properties&gt;
        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;
        &lt;java.version&gt;1.8&lt;/java.version&gt;
    &lt;/properties&gt;

    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
            &lt;exclusions&gt;
                &lt;exclusion&gt;
                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                    &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;
                &lt;/exclusion&gt;
            &lt;/exclusions&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-jetty&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;

&lt;/project&gt;
</pre></div>
</div>
<p>Application.java</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">package</span> <span class="n">org</span><span class="o">.</span><span class="n">sang</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.boot.autoconfigure.SpringBootApplication</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.builder.SpringApplicationBuilder</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.GetMapping</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RestController</span><span class="p">;</span>

<span class="nd">@SpringBootApplication</span>
<span class="nd">@RestController</span>
<span class="n">public</span> <span class="k">class</span> <span class="nc">Application</span> <span class="p">{</span>
    <span class="nd">@GetMapping</span><span class="p">(</span><span class="s2">&quot;/hello&quot;</span><span class="p">)</span>
    <span class="n">public</span> <span class="n">String</span> <span class="n">hello</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s2">&quot;hello jetty&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">public</span> <span class="n">static</span> <span class="n">void</span> <span class="n">main</span><span class="p">(</span><span class="n">String</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">SpringApplicationBuilder</span> <span class="n">builder</span> <span class="o">=</span> <span class="n">new</span> <span class="n">SpringApplicationBuilder</span><span class="p">(</span><span class="n">Application</span><span class="o">.</span><span class="n">class</span><span class="p">);</span>
        <span class="n">builder</span><span class="o">.</span><span class="n">application</span><span class="p">()</span><span class="o">.</span><span class="n">setAdditionalProfiles</span><span class="p">(</span><span class="s2">&quot;dev&quot;</span><span class="p">);</span>
        <span class="n">builder</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">args</span><span class="p">);</span>
<span class="o">//</span>        <span class="n">SpringApplication</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">Chapter013Application</span><span class="o">.</span><span class="n">class</span><span class="p">,</span> <span class="n">args</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>​
主要是从spring-boot-starter-web中除去默认的tomcat，然后加入Jetty的依赖即可。此时启动项目，查看启动日志。</p>
<p>如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2020</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">10</span> <span class="mi">21</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mf">01.920</span>  <span class="n">INFO</span> <span class="mi">1380</span> <span class="o">---</span> <span class="p">[</span>           <span class="n">main</span><span class="p">]</span> <span class="n">o</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">j</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">AnnotationMBeanExporter</span>        <span class="p">:</span> <span class="n">Registering</span> <span class="n">beans</span> <span class="k">for</span> <span class="n">JMX</span> <span class="n">exposure</span> <span class="n">on</span> <span class="n">startup</span>
<span class="mi">2020</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">10</span> <span class="mi">21</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mf">01.940</span>  <span class="n">INFO</span> <span class="mi">1380</span> <span class="o">---</span> <span class="p">[</span>           <span class="n">main</span><span class="p">]</span> <span class="n">o</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="n">j</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">h</span><span class="o">.</span><span class="n">ContextHandler</span><span class="o">.</span><span class="n">application</span>     <span class="p">:</span> <span class="n">Initializing</span> <span class="n">Spring</span> <span class="n">FrameworkServlet</span> <span class="s1">&#39;dispatcherServlet&#39;</span>
<span class="mi">2020</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">10</span> <span class="mi">21</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mf">01.940</span>  <span class="n">INFO</span> <span class="mi">1380</span> <span class="o">---</span> <span class="p">[</span>           <span class="n">main</span><span class="p">]</span> <span class="n">o</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">web</span><span class="o">.</span><span class="n">servlet</span><span class="o">.</span><span class="n">DispatcherServlet</span>        <span class="p">:</span> <span class="n">FrameworkServlet</span> <span class="s1">&#39;dispatcherServlet&#39;</span><span class="p">:</span> <span class="n">initialization</span> <span class="n">started</span>
<span class="mi">2020</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">10</span> <span class="mi">21</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mf">01.966</span>  <span class="n">INFO</span> <span class="mi">1380</span> <span class="o">---</span> <span class="p">[</span>           <span class="n">main</span><span class="p">]</span> <span class="n">o</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">web</span><span class="o">.</span><span class="n">servlet</span><span class="o">.</span><span class="n">DispatcherServlet</span>        <span class="p">:</span> <span class="n">FrameworkServlet</span> <span class="s1">&#39;dispatcherServlet&#39;</span><span class="p">:</span> <span class="n">initialization</span> <span class="n">completed</span> <span class="ow">in</span> <span class="mi">25</span> <span class="n">ms</span>
<span class="mi">2020</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">10</span> <span class="mi">21</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mf">02.011</span>  <span class="n">INFO</span> <span class="mi">1380</span> <span class="o">---</span> <span class="p">[</span>           <span class="n">main</span><span class="p">]</span> <span class="n">o</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="n">jetty</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">AbstractConnector</span>       <span class="p">:</span> <span class="n">Started</span> <span class="n">ServerConnector</span><span class="nd">@417ad4f3</span><span class="p">{</span><span class="n">HTTP</span><span class="o">/</span><span class="mf">1.1</span><span class="p">,[</span><span class="n">http</span><span class="o">/</span><span class="mf">1.1</span><span class="p">]}{</span><span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="p">:</span><span class="mi">8080</span><span class="p">}</span>
<span class="mi">2020</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">10</span> <span class="mi">21</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mf">02.021</span>  <span class="n">INFO</span> <span class="mi">1380</span> <span class="o">---</span> <span class="p">[</span>           <span class="n">main</span><span class="p">]</span> <span class="n">o</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">web</span><span class="o">.</span><span class="n">embedded</span><span class="o">.</span><span class="n">jetty</span><span class="o">.</span><span class="n">JettyWebServer</span>  <span class="p">:</span> <span class="n">Jetty</span> <span class="n">started</span> <span class="n">on</span> <span class="n">port</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="mi">8080</span> <span class="p">(</span><span class="n">http</span><span class="o">/</span><span class="mf">1.1</span><span class="p">)</span> <span class="k">with</span> <span class="n">context</span> <span class="n">path</span> <span class="s1">&#39;/&#39;</span>
<span class="mi">2020</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">10</span> <span class="mi">21</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mf">02.021</span>  <span class="n">INFO</span> <span class="mi">1380</span> <span class="o">---</span> <span class="p">[</span>           <span class="n">main</span><span class="p">]</span> <span class="n">org</span><span class="o">.</span><span class="n">sang</span><span class="o">.</span><span class="n">Application</span>                     <span class="p">:</span> <span class="n">Started</span> <span class="n">Application</span> <span class="ow">in</span> <span class="mf">5.786</span> <span class="n">seconds</span> <span class="p">(</span><span class="n">JVM</span> <span class="n">running</span> <span class="k">for</span> <span class="mf">6.557</span><span class="p">)</span>
</pre></div>
</div>
<p>访问web界面<code class="docutils literal notranslate"><span class="pre">http://127.0.0.1:8080/hello</span></code></p>
</div>
<div class="section" id="undertow">
<h2><a class="toc-backref" href="#id10">2.6. Undertow配置</a><a class="headerlink" href="#undertow" title="Permalink to this headline">¶</a></h2>
<div class="code xml highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;groupId&gt;org.sang&lt;/groupId&gt;
    &lt;artifactId&gt;chapter01-3&lt;/artifactId&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
    &lt;packaging&gt;jar&lt;/packaging&gt;

    &lt;name&gt;chapter01-3&lt;/name&gt;
    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;

    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;2.0.3.RELEASE&lt;/version&gt;
        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
    &lt;/parent&gt;

    &lt;properties&gt;
        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;
        &lt;java.version&gt;1.8&lt;/java.version&gt;
    &lt;/properties&gt;

    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
            &lt;exclusions&gt;
                &lt;exclusion&gt;
                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                    &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;
                &lt;/exclusion&gt;
            &lt;/exclusions&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-undertow&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;
</pre></div>
</div>
<p>启动项目，如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2020</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">10</span> <span class="mi">21</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mf">30.677</span>  <span class="n">INFO</span> <span class="mi">12788</span> <span class="o">---</span> <span class="p">[</span>           <span class="n">main</span><span class="p">]</span> <span class="n">o</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">j</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">AnnotationMBeanExporter</span>        <span class="p">:</span> <span class="n">Registering</span> <span class="n">beans</span> <span class="k">for</span> <span class="n">JMX</span> <span class="n">exposure</span> <span class="n">on</span> <span class="n">startup</span>
<span class="mi">2020</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">10</span> <span class="mi">21</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mf">30.839</span>  <span class="n">INFO</span> <span class="mi">12788</span> <span class="o">---</span> <span class="p">[</span>           <span class="n">main</span><span class="p">]</span> <span class="n">o</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">w</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="n">u</span><span class="o">.</span><span class="n">UndertowServletWebServer</span>     <span class="p">:</span> <span class="n">Undertow</span> <span class="n">started</span> <span class="n">on</span> <span class="n">port</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="mi">8080</span> <span class="p">(</span><span class="n">http</span><span class="p">)</span> <span class="k">with</span> <span class="n">context</span> <span class="n">path</span> <span class="s1">&#39;&#39;</span>
<span class="mi">2020</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">10</span> <span class="mi">21</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mf">30.854</span>  <span class="n">INFO</span> <span class="mi">12788</span> <span class="o">---</span> <span class="p">[</span>           <span class="n">main</span><span class="p">]</span> <span class="n">org</span><span class="o">.</span><span class="n">sang</span><span class="o">.</span><span class="n">Application</span>                     <span class="p">:</span> <span class="n">Started</span> <span class="n">Application</span> <span class="ow">in</span> <span class="mf">5.95</span> <span class="n">seconds</span> <span class="p">(</span><span class="n">JVM</span> <span class="n">running</span> <span class="k">for</span> <span class="mf">6.671</span><span class="p">)</span>
</pre></div>
</div>
<p>访问web界面<code class="docutils literal notranslate"><span class="pre">http://127.0.0.1:8080/hello</span></code></p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id11">2.7. Properties配置</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<p>Spring
Boot中采用了大量的自动化配置，但对开发者而言，在实际项目中不可避免会有一些需要自己手动配置。承载这些自定义配置的文件就是resources目录下的application.properties文件。（也可以使用YAML来配置）。</p>
<p>如果开发者不想使用application.properties作为配置文件名，也可以自己定义。例如在resources目录下创建一个配置文件app.properties，然后将项目打成jar包,使用如下命令：</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">java</span> <span class="o">-</span><span class="n">jar</span> <span class="n">chapter02</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="mf">0.0</span><span class="o">.</span><span class="mi">1</span><span class="o">-</span><span class="n">SNAPSHOT</span><span class="o">.</span><span class="n">jar</span> <span class="o">--</span><span class="n">spring</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">name</span><span class="o">=</span><span class="n">app</span>
</pre></div>
</div>
<p>在运行时再指定配置文件的名字，使用spring.config.location可以指定配置文件所在目录（注意需要以/结束），代码如下：</p>
<div class="code java highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">java</span> <span class="o">-</span><span class="n">jar</span> <span class="n">chapter02</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="mf">0.0</span><span class="o">.</span><span class="mi">1</span><span class="o">-</span><span class="n">SNAPSHOT</span><span class="o">.</span><span class="n">jar</span> <span class="o">--</span><span class="n">spring</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">name</span><span class="o">=</span><span class="n">app</span><span class="o">--</span><span class="n">spring</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">location</span><span class="o">=</span><span class="n">classpath</span><span class="p">:</span><span class="o">/</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="01.Spring_Boot入门.html" class="btn btn-neutral float-left" title="1. Spring Boot入门" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2019, huxiaojian

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>